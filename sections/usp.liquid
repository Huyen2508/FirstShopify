{% liquid
	assign blocks = section.blocks
%}

{%- if blocks.size > 0 -%}
  {%- capture carousel_contents -%}
    {%- for block in blocks -%}
      <div class="item carousel-item snap-start shrink-0 w-full md:w-1/3 flex justify-center items-center md:border-l md:border-grey-2 first:border-0 px-3">
        <div class="text-sm md:h-full md:flex md:flex-col md:justify-between md:items-center uppercase text-grey-900 font-bold text-center tracking-lgSpacing" style="color: {{ block.settings.text_color }};">
          <div class="usp-message mb-3">
            {{ block.settings.content }}
          </div>
          <div class="usp-link inline-block w-max">
            <a
              class="pb-1.5 border-b border-grey-900 block uppercase"
              href="{{ block.settings.cta_url }}"
              style="border-color: {{ block.settings.text_color }};">
              {{ block.settings.cta_text }}
            </a>
          </div>
        </div>
      </div>
    {%- endfor -%}
  {%- endcapture -%}
  <div class="usps-wrapper lg:pb-1">
    <div class="usp-content py-5 md:py-10 mb-8 lg:mb-14" style="background-color: {{ section.settings.bg_color }};">
      <div class="usps hidden md-checkout:flex">
        {{ carousel_contents }}
      </div>
      <div class="usps md-checkout:hidden ">
        {%- render 'carousel', class_buttons: 'opacity-0 pointer-events-none', class_wrap: '', class_main: '', class_inner: '', class: 'carousel-enable', class_dots: 'hidden', content: carousel_contents -%}
      </div>
    </div>
  </div>
{%- endif -%}

{% schema %}
  {
    "name": "USPs",
    "settings": [
      {
        "type": "color",
        "id": "bg_color",
        "label": "Background color",
        "default": "#FCF7F4"
      }
    ],
    "blocks": [
      {
        "type": "item",
        "name": "Item",
        "settings": [
          {
            "type": "richtext",
            "id": "content",
            "label": "Message"
          }, {
            "type": "text",
            "id": "cta_text",
            "label": "Cta text"
          }, {
            "type": "url",
            "id": "cta_url",
            "label": "Cta url"
          }, {
            "type": "color",
            "id": "text_color",
            "label": "Text color",
            "default": "#090F24"
          }
        ]
      }
    ],
    "max_blocks": 3,
    "presets": [
      {
        "name": "USPs",
        "blocks": [
          {
            "type": "item"
          }, {
            "type": "item"
          }, {
            "type": "item"
          }
        ]
      }
    ]
  }
{% endschema %}