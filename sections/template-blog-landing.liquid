{{- 'section-blog-landing.css' | asset_url | stylesheet_tag -}}
{%- render 'breadcrumbs', class: 'py-3 lg:py-3.5 mx-0 lg:mx-12', item_current_class: 'text-xs' -%}
{%- if section.settings.menu.links == blank -%}
  {%- assign menu_linklist = linklists[section.settings.menu].links -%}
{%- else -%}
  {%- assign menu_linklist = section.settings.menu.links -%}
{%- endif -%}
{% assign allArticles = blog.articles %}

<div>
  <div class="product-carousel-tabs relative lg:px-6 pt-0 md:pt-10">
    {% if section.settings.title %}
      <div class="heading-blog text-center lg:text-left">
        <h3 class="text-center mb-4 md:mb-6 text-2xl md:text-3xl leading-8 md:leading-10 tracking-mdSpacing font-bold text-grey-900">
          {{ section.settings.title }}
        </h3>
      </div>
    {% endif %}
    {% if section.settings.menu.links != blank %}
      {% assign count = 0 %}
      {%- capture list_feature -%}
        {% for link in menu_linklist %}
          {% assign count = count | plus: 1 %}
          <a href="{{ link.url }}"data-width-full=""title="Show article of {{ link.title }}"class="text-center shrink-0 overflow-hidden text-ellipsis tablink w-[calc(50%-6px)] md:w-auto carousel-item md:flex flex-row gap-2 py-3 md:py-3.5 px-5 md:px-6 swiper-slide font-bold border rounded-25 border-100 whitespace-nowrap text-base md:text-lg text-grey-700 inline-block md:mr-5 last:!mr-0 {% if blog.url == link.url %} text-grey-900 bg-active text-active font-bold {% endif %}">
            {{- link.title -}}
          </a>
        {% endfor %}
      {%- endcapture -%}
      <div class="blog-nav-desktop hidden ml-0 md:ml-2 md:ml-0 md:flex justify-center pl-4 md:px-4 lg:pt-0 mb-6 md:mb-12">
        <div class="blog-nav-swiper flex overflow-hidden mb-1 md:mb-0">
          <div class="swiper-wrapper block mr-8 last:!mr-0 tracking-0.4 text-primary flex">
            {{ list_feature }}
          </div>
        </div>
      </div>
      {% liquid
            assign class_button_blog =''

            if count < 3
                assign class_button_blog = class_button_blog | append: ' hidden '
            else  
                assign class_button_blog = class_button_blog | append: ' flex'
            endif

            if count < 5
                assign class_button_blog = class_button_blog | append: ' md:hidden '
            else
                assign class_button_blog = class_button_blog | append: ' md:flex'
            endif
        %}
      <div class="blog-nav-mobile md:hidden md:ml-2 md:ml-0 px-0 mx-4 md:mx-0 md:px-4 lg:pt-0 mb-6 md:mb-12">
        {%- render 'carousel' 
          circle_button: 'true',
          class_track: '',
          class_button: 'flex w-12 h-12 !ml-1',
          class_buttons: class_button_blog,
          class_wrap: '',
          class_main: 'flex',
          class_inner: '',
          class: 'carousel-enable gap-x-1.5',
          class_dots: 'hidden',
          content: list_feature -%}
      </div>
    {% endif %}
  </div>

  <div
    class="banner-image mb-8 md:mb-12 mx-4 md:mx-20"
    style="background-color: {{ section.settings.background_color_blog }}"
    ;>
    <div class="table-cell w-full relative">
      <div class="image w-full md:w-1/2 float-left">
        <div class="image_banner_desktop md-max:hidden">
          <img
            class="w-full"
            src="{{ section.settings.image_banner_blog  | img_url: 'master' }}"
            alt="">
        </div>
        <div class="title_banner md:hidden mt-0 md:mt-8 mb-0 md:mb-5">
          <img
            class="mx-auto"
            src="{{  section.settings.title_banner_blog  | img_url: 'master' }}"
            alt="">
        </div>
      </div>
      <div class="text w-full md:w-1/2 float-left">
        <div class="md:absolute md:top-1/2 md:-translate-y-2/4 md:pl-4 xl:pl-20 md:max-w-560 md:pr-3 md:text-left text-left md:pb-0 pb-1.5 mb-6">
          <p class="leading-4 py-3 px-5 text-base font-semibold text-grey-900 absolute md:static top-4 left-4 uppercase tracking-lgSpacing rounded-100 bg-white w-fit">{{ section.settings.title_featured }}</p>
          <h4 class="md:leading-10 leading-7 text-xl lg:text-3xl md:text-2xl tracking-mdSpacing font-bold text-grey-900 mt-6 md:mt-4 md:mb-8 mb-5 md:px-0 px-4">{{ section.settings.title_banner_blog }}</h4>
          <a class="relative font-bold text-grey-900 uppercase text-sm tracking-lgSpacing after:content-[''] mx-4 md:mx-0 md:px-0 after:-bottom-2 after:absolute after:bg-grey-900 after:w-full after:left-0 after:h-px" href="{{section.settings.title_featured }}">{{ section.settings.button_banner_blog }}</a>
        </div>
      </div>
    </div>
  </div>
  {% paginate blog.articles by section.settings.paginate %}
    <div class="blog-landing mb-8 md:mb-11 gap-y-8 md:gap-y-10 gap-x-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 px-4 lg:px-20">
      {% for blog in blog.articles %}
        {% assign index = forloop.index0 %}
        {% assign title = itemTitles[index] %}

        <div class='article-card flex flex-col h-auto' key={{ blog.id }}>
          <a href={{ blog.url }}class='group relative w-full block overflow-hidden rounded-lg'>
            <img
              src={{ blog.image.src | img_url: 'master' }}
              loading='lazy'
              alt={{ blog.image.alt }}
              class='block w-full rounded-lg object-center object-cover max-w-full hover:zoom transition-all duration-400' />
          </a>
          <p class='text-sm mt-4 md:mt-5 font-semibold text-primary text-xss'>{{ blog.handle }}</p>
          <div class='mb-0 md:mb-0.5'>
            <a class='text text-xl block no-underline font-semibold mt-1 text-grey-900 mb-2' href={{ blog.url }}>
              {{ blog.title }}
            </a>
            <div class="line-clamp-3 overflow-hidden">{{ blog.content }}</div>
            <div class="mt-6 md:mt-8">
              <a class="relative uppercase text-sm font-bold after:content-empty after:-bottom-2 after:absolute after:bg-grey-900                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         after:w-full after:left-0 after:h-px" href={{ blog.url }}>
                {{ section.settings.button_banner_blog }}
              </a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
    {%- render 'pagination' 
      , pagination: paginate,
      class: ' mb-8 lg:mb-16 lg:py-2 lg:pt-0.5',
      class_pagination_next: 'w-[18px] h-[18px] text-grey-500',
      class_pagination_previous: 'w-[18px] h-[18px] text-grey-500 rotate-180' -%}
  {% endpaginate %}
</div>
{%- capture src_url -%}
  {{- 'section-blog-landing.js' | asset_url -}}
{%- endcapture -%}
{%- render 'atom_script', src: src_url, priority: 'normal', type: 'defer' -%}

{% schema %}
  {
    "name": "Blog",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "Our Blog"
      },
      {
        "type": "image_picker",
        "id": "image_banner_blog",
        "label": "Image Banner Blog"
      },
      {
        "type": "color",
        "id": "background_color_blog",
        "label": "Content's background color",
        "default": "#FCF7F4"
      },
      {
        "type": "text",
        "id": "title_featured",
        "label": "Featured",
        "default": "Featured"
      }, {
        "type": "text",
        "id": "title_banner_blog",
        "label": "Banner Blog",
        "default": "New Spring Linens are here!"
      }, {
        "type": "text",
        "id": "description_banner",
        "label": "Description Banner",
        "default": "Get ahead of the style game this season. See our in-house stylist Kaitlyn introduce our latest linen styles for Spring!"
      }, {
        "type": "text",
        "id": "button_banner_blog",
        "label": "Read Article",
        "default": "Read Article"
      }, {
        "type": "link_list",
        "id": "menu",
        "label": "List blogs"
      }, {
        "type": "number",
        "id": "paginate",
        "label": "Page Limit",
        "default": 2
      }
    ]
  }
{% endschema %}