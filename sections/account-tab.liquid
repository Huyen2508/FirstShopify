{%- liquid
  assign tab_class = "relative py-4 lg:py-6 cursor-pointer [&.active]:text-grey-900 [&.active]:after:content-[''] [&.active]:after:absolute [&.active]:after:-bottom-[1px] [&.active]:after:block [&.active]:after:w-full [&.active]:after:border-b-[3px] [&.active]:after:border-b-secondary [&.active]:after:border-default js-tab-label"
  assign tab_class_typo = 'text-sm font-bold text-center uppercase text-grey-500 tracking-[0.5px]'
  assign sign_in_label = 'customer.login_page.sign_in' | t
  assign register_label = 'customer.login_page.register' | t
-%}

{%- if request.path contains 'register' -%}
  {%- assign current_page = 'register' -%}
{%- else -%}
  {%- assign current_page = 'login' -%}
{%- endif -%}

<account-tab class="relative">
  {%- assign bg_url = null -%}
  {%- if settings.login_image != blank and current_page == 'login' -%}
    {%- assign bg_url = settings.login_image -%}
  {%- elsif settings.register_image != blank and current_page == 'register' -%}
    {%- assign bg_url = settings.register_image -%}
  {%- endif -%}

  {%- if bg_url != blank -%}
    {%- render 'image', image: bg_url, class: 'hidden md:block fit [.recover-form-active_&]:hidden' -%}
  {%- endif -%}
  <div>
    <div class="relative">
      {%- if current_page == 'login' -%}
      <div class="md:grid md:grid-cols-2 md:border-b md:border-input md:border-solid">
        <div class="w-full">
          {%- render 'account-login' -%}  
        </div>
        <div class="w-full xl:py-28 md:py-20 pt-8 pb-2.5 xl:pl-36 md:px-5 px-4" style="background-color: {{ section.settings.login_background_right}};">
          <div class="md:pl-1.5">
            <h3 class="xl:text-3xl md:text-2xl text-xl font-bold text-grey-900 md:tracking-mdSpacing tracking-xsSpacing md:mt-2.5 mt-px md:mb-5 md:pb-0.5 mb-6 pb-0 md:text-left text-center">{{section.settings.title_right}}</h3>  
            <div class="content-login-right">
              {%- for block in section.blocks -%}
                <div class="icon-text mb-5">
                  {%- if block.settings.login_icon != blank -%}
                    <img class="md:w-8 md:h-8 w-6 h-6 inline-block" src="{{ block.settings.login_icon  | img_url: 'master' }}" alt="">
                  {%- endif -%}
                  {%- if block.settings.login_text != blank -%}
                    <p class="text-base leading-5 font-semibold text-grey-900 tracking-xsSpacing inline-block md:ml-5 ml-4">{{block.settings.login_text}}</p>
                  {%- endif -%}
                </div>
              {%- endfor -%}
            </div>
          </div>
        </div>
      </div> 
      {%- elsif current_page == 'register' -%}
        {%- render 'account-register',
            custom_description: section.settings.custom_description
            sub_content_register: section.settings.sub_content_register
         -%}
      {%- endif -%}
    </div>
  </div>
</account-tab>

{% schema %}
{ 
  "name": "Setting Login Register",
  "settings": [
    {
      "type": "color",
      "id": "login_background_right",
      "label": "Login background right",
      "default": "#FCF7F4"
    },
    {
      "type":"text",
      "id":"title_right",
      "label":"Title Right Login"
    },
    {
      "type":"text",
      "id":"sub_content_register",
      "label":"Sub Content Register"
    },
    {
      "type":"richtext",
      "id":"custom_description",
      "label":"Custom Description Register"
    }
  ],
  "blocks": [
    {
      "type":"icon",
      "name":"icon_text",
      "settings": [
        {
          "type": "image_picker",
          "id": "login_icon",
          "label": "Login Icon"
        },
        {
          "type":"text",
          "id":"login_text",
          "label":"Login Text"
        }
      ]
    }
  ]
}
{% endschema %}